# https://taskfile.dev/#/installation
version: 3

# env - dotenv, global, local
dotenv: ['.env']

# tasks
tasks:
  all:
    cmds:
      - task: cmake-format
      - task: clang-format
      - task: build
      - task: docs

  cmake-format:
    - cmake-format --in-place
      ./cmake/program_options/*.cmake
      ./cmake/program_options/src/*.cmake
      ./cmake/dependency_options/*.cmake
      ./lib/CMakeLists.txt
      ./app/CMakeLists.txt
      ./tests/CMakeLists.txt
  clang-format:
    - clang-format -i ./lib/*.cc ./app/*.cc --style=file

  build:
    - cmake -S. -Bbuild -DCMAKE_BUILD_TYPE:STRING=Debug #-G "Ninja Multi-Config"
    - cmake --build build

  install:
    - cd ./build && make install # ninja install

  docs:
    - cmake --build build --target doxygen-docs
    - cp -r ./build/html ./docs

  tests:
    - cmake --build build --target ctest

  clean:
    - rm -rf build docs



